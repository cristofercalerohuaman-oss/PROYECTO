{% extends "base.html" %}
{% block title %}Mi Perfil - Flota{% endblock %}

{% block content %}
<div class="container">
  <h1>Mi Perfil</h1>
  <p class="muted">Aquí puedes actualizar tu información de contacto y cambiar tu contraseña.</p>

  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 1.5rem;">

    <div class="card">
      <h2>Actualizar Datos</h2>
      {% if perfil_form %}
        <form method="post">
          {% csrf_token %}
          
          <p>
            {{ perfil_form.telefono.label_tag }}
            {{ perfil_form.telefono }}
            {{ perfil_form.telefono.errors }}
          </p>
          <p>
            {{ perfil_form.email.label_tag }}
            {{ perfil_form.email }}
            {{ perfil_form.email.errors }}
          </p>

          <button type="submit" name="update_profile" class="btn btn-primary">Guardar Cambios</button>
        </form>
      {% else %}
        <p class="msg error">El formulario de perfil no está disponible.</p>
      {% endif %}
    </div>

    <div class="card">
      <h2>Cambiar Contraseña</h2>
      {% if password_form %}
        <form method="post">
          {% csrf_token %}

          <p>
            {{ password_form.old_password.label_tag }}
            {{ password_form.old_password }}
            {{ password_form.old_password.errors }}
          </p>
           <p>
            {{ password_form.new_password1.label_tag }}
            {{ password_form.new_password1 }}
            {{ password_form.new_password1.errors }}
          </p>
           <p>
            {{ password_form.new_password2.label_tag }}
            {{ password_form.new_password2 }}
            {{ password_form.new_password2.errors }}
          </p>
          
          <button type="submit" name="change_password" class="btn btn-primary">Cambiar Contraseña</button>
        </form>
      {% else %}
         <p class="msg error">El formulario de cambio de contraseña no está disponible.</p>
      {% endif %}
    </div>

  </div> </div>
{% endblock %}